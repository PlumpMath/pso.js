<!DOCTYPE html>

<html>
<head>
  <title>pso.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco-small-tab.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>pso.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <pre><code>Copyright <span class="hljs-number">2015</span> Adrian Toncean; released under the MIT license
</code></pre>
            </div>
            
            <div class="content"><div class='highlight'><pre>(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
<span class="hljs-pi">	'use strict'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Defines a candidate solution</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Particle</span><span class="hljs-params">(position, velocity, options)</span> </span>{
		<span class="hljs-keyword">this</span>.position = position;
		<span class="hljs-keyword">this</span>.velocity = velocity;
		<span class="hljs-keyword">this</span>.bestPosition = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-keyword">this</span>.position.length);
		<span class="hljs-keyword">this</span>.fitness = -<span class="hljs-literal">Infinity</span>;
		<span class="hljs-keyword">this</span>.bestFitness = -<span class="hljs-literal">Infinity</span>;

		<span class="hljs-keyword">this</span>._inertiaWeight = options.inertiaWeight;
		<span class="hljs-keyword">this</span>._social = options.social;
		<span class="hljs-keyword">this</span>._personal = options.personal;
	}

	Particle.prototype = {</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Stores the current position as its best so far.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		storePosition: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
			<span class="hljs-keyword">this</span>.bestPosition = <span class="hljs-keyword">this</span>.position.slice(<span class="hljs-number">0</span>);
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Retrieves the particle’s current position.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		getPosition: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.position.slice(<span class="hljs-number">0</span>);
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Retrieves the particle’s best saved position.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		getBestPosition: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.bestPosition.slice(<span class="hljs-number">0</span>);
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Updates the particle’s velocity vector based on inertia,
the best-performing particle in the swarm and
the best position the current particle has saved.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		updateVelocity: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(globalBest, random)</span> </span>{
			<span class="hljs-keyword">this</span>.position.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(component, index)</span> </span>{
				<span class="hljs-keyword">var</span> inertia = <span class="hljs-keyword">this</span>.velocity[index] * <span class="hljs-keyword">this</span>._inertiaWeight;
				<span class="hljs-keyword">var</span> socialInfluence = (globalBest.position[index] - component) * random() * <span class="hljs-keyword">this</span>._social;
				<span class="hljs-keyword">var</span> personalInfluence = (<span class="hljs-keyword">this</span>.bestPosition[index] - component) * random() * <span class="hljs-keyword">this</span>._personal;

				<span class="hljs-keyword">this</span>.velocity[index] = inertia + socialInfluence + personalInfluence;
			}, <span class="hljs-keyword">this</span>);
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Applies the velocity</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		updatePosition: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
			<span class="hljs-keyword">this</span>.velocity.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(component, index)</span> </span>{
				<span class="hljs-keyword">this</span>.position[index] += component;
			}, <span class="hljs-keyword">this</span>);
		}
	};

	Particle.createRandom = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(domain, options, random)</span> </span>{
		<span class="hljs-keyword">var</span> position = domain.map(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(interval)</span> </span>{
			<span class="hljs-keyword">return</span> random() * (interval.end - interval.start) + interval.start;
		});

		<span class="hljs-keyword">var</span> velocity = domain.map(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(interval)</span> </span>{
			<span class="hljs-keyword">return</span> (random() * (interval.end - interval.start)) * <span class="hljs-number">0.05</span>;
		});

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Particle(position, velocity, options);
	};</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Used to define domains.
An <em>Interval</em> is anything with a <em>start</em> and an <em>end</em>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Interval</span><span class="hljs-params">(start, end)</span> </span>{
		<span class="hljs-keyword">this</span>.start = start;
		<span class="hljs-keyword">this</span>.end = end;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Holds particles and carries out the optimization task.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Optimizer</span><span class="hljs-params">()</span> </span>{
		<span class="hljs-keyword">this</span>._particles = <span class="hljs-literal">null</span>;
		<span class="hljs-keyword">this</span>._objectiveFunction = <span class="hljs-literal">null</span>;

		<span class="hljs-keyword">this</span>._bestPositionEver = <span class="hljs-literal">null</span>;
		<span class="hljs-keyword">this</span>._bestFitnessEver = -<span class="hljs-literal">Infinity</span>;

		<span class="hljs-keyword">this</span>._options = {
			inertiaWeight: <span class="hljs-number">0.8</span>,
			social: <span class="hljs-number">0.4</span>,
			personal: <span class="hljs-number">0.4</span>,
			pressure: <span class="hljs-number">0.5</span>
		};

		<span class="hljs-keyword">this</span>._async = <span class="hljs-literal">false</span>;
		<span class="hljs-keyword">this</span>._waiting = <span class="hljs-literal">false</span>;

		<span class="hljs-keyword">this</span>.rng = {
			random: <span class="hljs-built_in">Math</span>.random,
			setSeed: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{}
		};
	}

	Optimizer.prototype = {
		setOptions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(options)</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <ul>
<li><em>inertiaWeight</em> - is multiplied every frame with the previous velocity;
takes values between 0 and 1</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> (options.inertiaWeight !== <span class="hljs-literal">undefined</span>) {
				<span class="hljs-keyword">this</span>._options.inertiaWeight = options.inertiaWeight;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <ul>
<li><em>social</em> dictates the influence of the best performing particle when updating particle velocities
takes values between 0 and 1</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> (options.social !== <span class="hljs-literal">undefined</span>) {
				<span class="hljs-keyword">this</span>._options.social = options.social;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <ul>
<li><em>personal</em> dictates the influence of a particle’s best encountered position
takes values between 0 and 1</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> (options.personal !== <span class="hljs-literal">undefined</span>) {
				<span class="hljs-keyword">this</span>._options.personal = options.personal;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <ul>
<li><em>pressure</em> - bias in selecting the best performing particle in the swarm.
Takes values between 0 and 1; 0 meaning that the best is chosen randomly and 1 that
the actual best is computed at every iteration</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> (options.pressure !== <span class="hljs-literal">undefined</span>) {
				<span class="hljs-keyword">this</span>._options.pressure = options.pressure;
			}
		},

		setObjectiveFunction: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(objectiveFunction, options)</span> </span>{
			<span class="hljs-keyword">this</span>._objectiveFunction = objectiveFunction;
			<span class="hljs-keyword">this</span>._async = options &amp;&amp; options.async;
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>To be called before any simulation.
Creates the swarm and resets any previous recorded best solutions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		init: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(nParticles, generationOption)</span> </span>{
			<span class="hljs-keyword">var</span> generator = generationOption <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Function</span> ?
				generationOption :
				<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
					<span class="hljs-keyword">return</span> Particle.createRandom(generationOption, <span class="hljs-keyword">this</span>._options, <span class="hljs-keyword">this</span>.rng.random);
				}.bind(<span class="hljs-keyword">this</span>);

			<span class="hljs-keyword">this</span>._bestPositionEver = <span class="hljs-literal">null</span>;
			<span class="hljs-keyword">this</span>._bestFitnessEver = -<span class="hljs-literal">Infinity</span>;

			<span class="hljs-keyword">this</span>._particles = [];
			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; nParticles; i++) {
				<span class="hljs-keyword">this</span>._particles.push(generator());
			}
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Retrieve the fittest particle from a subset of the entire swarm.
The subset’s size depends on the <em>pressure</em> parameter</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		_getRandomBest: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(except)</span> </span>{
			<span class="hljs-keyword">var</span> ret = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-keyword">this</span>.rng.random() * <span class="hljs-keyword">this</span>._particles.length);

			<span class="hljs-keyword">this</span>._particles.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(particle, index)</span> </span>{
				<span class="hljs-keyword">if</span> (
					<span class="hljs-keyword">this</span>.rng.random() &lt; <span class="hljs-keyword">this</span>._options.pressure &amp;&amp;
					<span class="hljs-keyword">this</span>._particles[index].fitness &gt; <span class="hljs-keyword">this</span>._particles[ret].fitness &amp;&amp;
					index !== except
				) {
					ret = index;
				}
			}, <span class="hljs-keyword">this</span>);

			<span class="hljs-keyword">return</span> ret;
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Iterate once;
<em>callback</em> is supplied only if the fitness function is asynchronous</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		step: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(callback)</span> </span>{
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._async) {
				<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._waiting) {
					<span class="hljs-built_in">console</span>.warn(<span class="hljs-string">'Cannot step again before previous requests have been completed!'</span>);
					<span class="hljs-keyword">return</span>;
				}
				<span class="hljs-keyword">this</span>._waiting = <span class="hljs-literal">true</span>;
				<span class="hljs-keyword">var</span> completed = <span class="hljs-number">0</span>;
				<span class="hljs-keyword">this</span>._particles.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(particle)</span> </span>{
					<span class="hljs-keyword">this</span>._objectiveFunction(particle.position, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(fitness)</span> </span>{
						particle.fitness = fitness;
						completed++;
						<span class="hljs-keyword">if</span> (completed &gt;= <span class="hljs-keyword">this</span>._particles.length) {
							<span class="hljs-keyword">this</span>._waiting = <span class="hljs-literal">false</span>;
							<span class="hljs-keyword">this</span>._completeStep();
							callback();
						}
					}.bind(<span class="hljs-keyword">this</span>));
				}, <span class="hljs-keyword">this</span>);
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">this</span>._particles.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(particle)</span> </span>{
					particle.fitness = <span class="hljs-keyword">this</span>._objectiveFunction(particle.position);
				}, <span class="hljs-keyword">this</span>);
				<span class="hljs-keyword">this</span>._completeStep();
			}
		},

		_completeStep: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Record the best found solutions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>._particles.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(particle)</span> </span>{
				<span class="hljs-keyword">if</span> (particle.fitness &gt; particle.bestFitness) {
					particle.bestFitness = particle.fitness;
					particle.storePosition();

					<span class="hljs-keyword">if</span> (particle.fitness &gt; <span class="hljs-keyword">this</span>._bestFitnessEver) {
						<span class="hljs-keyword">this</span>._bestFitnessEver = particle.fitness;
						<span class="hljs-keyword">this</span>._bestPositionEver = particle.getPosition();
					}
				}
			}, <span class="hljs-keyword">this</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Update velocities</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>._particles.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(particle, index)</span> </span>{
				<span class="hljs-keyword">var</span> randomBest = <span class="hljs-keyword">this</span>._particles[<span class="hljs-keyword">this</span>._getRandomBest(index)];
				particle.updateVelocity(randomBest, <span class="hljs-keyword">this</span>.rng.random);
			}, <span class="hljs-keyword">this</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Update positions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>._particles.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(particle)</span> </span>{
				particle.updatePosition();
			});
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Retrieves an array of all solutions in the swarm</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		getParticles: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._particles.map(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(particle)</span> </span>{
				<span class="hljs-keyword">return</span> {
					position: particle.getPosition(),
					fitness: particle.fitness,
					bestPosition: particle.getBestPosition(),
					bestFitness: particle.bestFitness
				};
			});
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Retrieves the best solution ever recorded</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		getBestPosition: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._bestPositionEver;
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Retrieves the best fitness ever recorded</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		getBestFitness: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._bestFitnessEver;
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Retrieves the mean fitness of the entire swarm</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		getMeanFitness: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
			<span class="hljs-keyword">var</span> sum = <span class="hljs-keyword">this</span>._particles.reduce(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(partialSum, particle)</span> </span>{
				<span class="hljs-keyword">return</span> partialSum + particle.fitness;
			}, <span class="hljs-number">0</span>);
			<span class="hljs-keyword">return</span> sum / <span class="hljs-keyword">this</span>._particles.length;
		}
	};</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p><em>pso.js</em> works</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> define === <span class="hljs-string">'function'</span> &amp;&amp; define.amd) {</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <ul>
<li>with <em>RequireJS</em></li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>		define(<span class="hljs-string">'pso/Interval'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> Interval; });
		define(<span class="hljs-string">'pso/Particle'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> Particle; });
		define(<span class="hljs-string">'pso/Optimizer'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> Optimizer; });
	} <span class="hljs-keyword">else</span> {
		<span class="hljs-keyword">var</span> pso = {
			Interval: Interval,
			Particle: Particle,
			Optimizer: Optimizer
		};
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> WorkerGlobalScope !== <span class="hljs-string">'undefined'</span> &amp;&amp; self <span class="hljs-keyword">instanceof</span> WorkerGlobalScope) {</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <ul>
<li>from a <em>WebWorker</em></li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>			self.pso = pso;
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">module</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-built_in">module</span>.exports) {</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <ul>
<li>in <em>node</em></li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-built_in">module</span>.exports = pso;
		} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <ul>
<li>or in a plain browser environment</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-built_in">window</span>.pso = pso;
		}
	}
})();</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
